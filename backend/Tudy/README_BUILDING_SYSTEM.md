# ğŸ—ï¸ Tudy ê±´ë¬¼ ì‹œìŠ¤í…œ

Tudy í”„ë¡œì íŠ¸ì— ì¶”ê°€ëœ ê±´ë¬¼ ì‹œìŠ¤í…œì— ëŒ€í•œ ì„¤ëª…ì…ë‹ˆë‹¤.

## ğŸ¢ **ê±´ë¬¼ ì¢…ë¥˜ ë° ì¸µ êµ¬ì¡°**

### 1. **í•™ê³¼ ê±´ë¬¼ (5ì¸µ)**
```
9  10   â† 5ì¸µ
7   8   â† 4ì¸µ
5   6   â† 3ì¸µ
3   4   â† 2ì¸µ
1   2   â† 1ì¸µ
```

**ê³µê°„ ì¢…ë¥˜ ë° ê°€ê²©:**
- **ê°•ì˜ì‹¤** (3ë‹¨ê³„): ì¹ íŒ&ì¢Œì„ â†’ ë¹”í”„ë¡œì í„° â†’ êµìˆ˜ - **500ì½”ì¸**
- **ê³¼ë°©** (3ë‹¨ê³„): í…Œì´ë¸” â†’ TV â†’ ë™ë°© - **1200ì½”ì¸**
- **í•™ê³¼ì‚¬ë¬´ì‹¤** (2ë‹¨ê³„): ì‚¬ë¬´ì‹¤ â†’ ë¼ìš´ì§€ - **800ì½”ì¸**
- **ì „ê³µì‹¤** (1ë‹¨ê³„): ê¸°ë³¸ - **1000ì½”ì¸**
- **í™”ì¥ì‹¤** (1ë‹¨ê³„): ê¸°ë³¸ - **500ì½”ì¸**
- **ì„¸ë¯¸ë‚˜ì‹¤** (2ë‹¨ê³„): ë§ˆì´í¬&ì¢Œì„ â†’ ë¹”í”„ë¡œì í„° - **800ì½”ì¸**

### 2. **ìƒˆë²½ë²Œ ë„ì„œê´€ (4ì¸µ)**
```
7  8
5  6
3  4
1  2
```

**ê³µê°„ ì¢…ë¥˜:**
- **ìŠ¤í„°ë””ë£¸** - **500ì½”ì¸**
- **ìƒˆë²½ë²Œë‹¹** - **1000ì½”ì¸**
- **ì¹´í˜** - **800ì½”ì¸**
- **ì—´ëŒì‹¤** - **500ì½”ì¸**
- **ë…¸íŠ¸ë¶ ì—´ëŒì‹¤** - **600ì½”ì¸**

### 3. **ì²´ìœ¡ê´€ (3ì¸µ)**
```
5  6
3  4
1  2
```

**ê³µê°„ ì¢…ë¥˜:**
- **ì¹´ìš´í„°** - **500ì½”ì¸**
- **ìŠ¤íŠ¸ë ˆì¹­ì‹¤** - **600ì½”ì¸**
- **ìƒ¤ì›Œì‹¤** - **500ì½”ì¸**
- **ì˜¤ìš´ì™„ zone** - **1000ì½”ì¸**
- **ê¸°êµ¬** - **800ì½”ì¸**

### 4. **ì¹´í˜ (2ì¸µ)**
```
3  4
1  2
```

**ê³µê°„ ì¢…ë¥˜:**
- **ì¹´ìš´í„°** - **500ì½”ì¸**
- **ì°½ê³ ** - **300ì½”ì¸**
- **í…Œì´ë¸” ì¢Œì„** - **600ì½”ì¸**
- **ë””ì €íŠ¸** (1/2/3ë‹¨ê³„) - **400/600/800ì½”ì¸**

## ğŸ”„ **ì‹œìŠ¤í…œ ê·œì¹™**

### **ë‚´ë¶€ ì¸µ í™•ì¥**
- 1ì¸µ(ìœ„ì¹˜ 1,2) ë‹¤ ì±„ìš°ë©´ 2ì¸µ(3,4) ìë™ìœ¼ë¡œ ì—´ë¦¼
- 3ì¸µ, 4ì¸µ, 5ì¸µë„ ê°™ì€ ê·œì¹™

### **ì™¸ë¶€ ì—…ê·¸ë ˆì´ë“œ**
- **ì¹´í˜**: 2ì¸µ í™•ì¥ ì‹œ ì™¸ê´€ ì—…ê·¸ë ˆì´ë“œ ê°€ëŠ¥
- **í•™ê³¼ ê±´ë¬¼, ì²´ìœ¡ê´€, ë„ì„œê´€**: 3ì¸µ í™•ì¥ ì‹œ ì™¸ê´€ ì—…ê·¸ë ˆì´ë“œ ê°€ëŠ¥
- ì—…ê·¸ë ˆì´ë“œëŠ” **ë¬´ë£Œ**, ë²„íŠ¼ í´ë¦­ ì‹œ ì§„í–‰

## ğŸ—ï¸ **ì‹œìŠ¤í…œ êµ¬ì¡°**

### **í•µì‹¬ í´ë˜ìŠ¤ë“¤**
- `BuildingType` - ê±´ë¬¼ íƒ€ì… enum
- `SpaceType` - ê³µê°„ íƒ€ì… enum (ê°€ê²©, ìµœëŒ€ ë ˆë²¨ í¬í•¨)
- `BuildingConfig` - ê±´ë¬¼ë³„ ì„¤ì • ì •ë³´
- `UserBuilding` - ì‚¬ìš©ì ê±´ë¬¼ ì •ë³´
- `UserBuildingSlot` - ê±´ë¬¼ì˜ ê° ì¹¸(ìŠ¬ë¡¯)
- `BuildingService` - ê±´ë¬¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- `BuildingController` - ê±´ë¬¼ API ì—”ë“œí¬ì¸íŠ¸

## ğŸ“¡ **API ì—”ë“œí¬ì¸íŠ¸**

### 1. **ìœ ì € ê±´ë¬¼ ì „ì²´ ì¡°íšŒ**
```http
GET /api/users/{userId}/buildings/{buildingType}
Authorization: Bearer {token}
```

**ê²½ë¡œ ë³€ìˆ˜:**
- `userId`: ì‚¬ìš©ì ID
- `buildingType`: `department`, `library`, `gym`, `cafe`

**ì‘ë‹µ:**
```json
{
  "building": {
    "id": 1,
    "buildingType": "DEPARTMENT",
    "currentFloor": 2,
    "exteriorUpgraded": false
  },
  "slots": [
    {
      "id": 1,
      "slotNumber": 1,
      "spaceType": "LECTURE",
      "currentLevel": 2,
      "isInstalled": true
    }
  ],
  "buildingConfig": {
    "floors": 5,
    "slotsPerFloor": 2,
    "exteriorUpgradeFloor": 3
  }
}
```

### 2. **íŠ¹ì • ì¹¸ ì¡°íšŒ**
```http
GET /api/users/{userId}/buildings/{buildingType}/slots/{slotNumber}
Authorization: Bearer {token}
```

**ì‘ë‹µ:**
```json
{
  "id": 1,
  "slotNumber": 1,
  "spaceType": "LECTURE",
  "currentLevel": 2,
  "isInstalled": true
}
```

### 3. **ê³µê°„ ì„¤ì¹˜**
```http
POST /api/users/{userId}/buildings/{buildingType}/slots/{slotNumber}/install
Authorization: Bearer {token}
Content-Type: application/json
```

**ìš”ì²­ ë°”ë””:**
```json
{
  "spaceType": "LECTURE"
}
```

**ì‘ë‹µ:**
```json
{
  "id": 1,
  "slotNumber": 1,
  "spaceType": "LECTURE",
  "currentLevel": 1,
  "isInstalled": true
}
```

### 4. **ê³µê°„ ì—…ê·¸ë ˆì´ë“œ**
```http
POST /api/users/{userId}/buildings/{buildingType}/slots/{slotNumber}/upgrade
Authorization: Bearer {token}
```

**ì‘ë‹µ:**
```json
{
  "id": 1,
  "slotNumber": 1,
  "spaceType": "LECTURE",
  "currentLevel": 2,
  "isInstalled": true
}
```

### 5. **ì™¸ê´€ ì—…ê·¸ë ˆì´ë“œ**
```http
POST /api/users/{userId}/buildings/{buildingType}/exterior/upgrade
Authorization: Bearer {token}
```

**ì‘ë‹µ:**
```json
{
  "id": 1,
  "buildingType": "DEPARTMENT",
  "currentFloor": 3,
  "exteriorUpgraded": true
}
```

### 6. **ê³µê°„/ë‹¨ê³„ë³„ ì„¤ì •ê°’ ì¡°íšŒ**
```http
GET /api/buildings/{buildingType}/spaces/config
```

**ì‘ë‹µ:**
```json
{
  "buildingType": "DEPARTMENT",
  "displayName": "í•™ê³¼ ê±´ë¬¼",
  "floors": 5,
  "slotsPerFloor": 2,
  "exteriorUpgradeFloor": 3,
  "spaces": {
    "LECTURE": {
      "displayName": "ê°•ì˜ì‹¤",
      "basePrice": 500,
      "upgradePrice": 250,
      "maxLevel": 3
    }
  }
}
```

## ğŸ¯ **ì‚¬ìš© ì˜ˆì‹œ**

### **1. í•™ê³¼ ê±´ë¬¼ì— ê°•ì˜ì‹¤ ì„¤ì¹˜**
```bash
POST /api/users/user1/buildings/department/slots/1/install
{
  "spaceType": "LECTURE"
}
```
â†’ í•™ê³¼&ìƒˆë„ ì½”ì¸ 500ê°œ ì°¨ê°, 1ì¸µ 1ë²ˆ ì¹¸ì— ê°•ì˜ì‹¤ ì„¤ì¹˜

### **2. ê°•ì˜ì‹¤ ì—…ê·¸ë ˆì´ë“œ**
```bash
POST /api/users/user1/buildings/department/slots/1/upgrade
```
â†’ í•™ê³¼&ìƒˆë„ ì½”ì¸ 250ê°œ ì°¨ê°, ê°•ì˜ì‹¤ ë ˆë²¨ 2ë¡œ ì—…ê·¸ë ˆì´ë“œ

### **3. 1ì¸µ ì™„ì„± ì‹œ ìë™ 2ì¸µ í™•ì¥**
1ì¸µì˜ ëª¨ë“  ì¹¸(1,2ë²ˆ)ì— ê³µê°„ ì„¤ì¹˜ ì™„ë£Œ
â†’ 2ì¸µ(3,4ë²ˆ) ìë™ìœ¼ë¡œ ì—´ë¦¼

### **4. ì™¸ê´€ ì—…ê·¸ë ˆì´ë“œ**
```bash
POST /api/users/user1/buildings/department/exterior/upgrade
```
â†’ 3ì¸µ ë‹¬ì„± ì‹œ ì™¸ê´€ ì—…ê·¸ë ˆì´ë“œ ê°€ëŠ¥ (ë¬´ë£Œ)

## ğŸ—„ï¸ **ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ**

### **user_buildings í…Œì´ë¸”**
```sql
CREATE TABLE user_buildings (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id BIGINT NOT NULL,
    building_type VARCHAR(20) NOT NULL,
    current_floor INTEGER NOT NULL DEFAULT 1,
    exterior_upgraded BOOLEAN NOT NULL DEFAULT FALSE,
    CONSTRAINT fk_user_building_user FOREIGN KEY (user_id) REFERENCES users(id),
    CONSTRAINT uq_user_building_type UNIQUE (user_id, building_type)
);
```

### **user_building_slots í…Œì´ë¸”**
```sql
CREATE TABLE user_building_slots (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id BIGINT NOT NULL,
    building_type VARCHAR(20) NOT NULL,
    slot_number INTEGER NOT NULL,
    space_type VARCHAR(30),
    current_level INTEGER NOT NULL DEFAULT 0,
    is_installed BOOLEAN NOT NULL DEFAULT FALSE,
    CONSTRAINT fk_user_building_slot_user FOREIGN KEY (user_id) REFERENCES users(id),
    CONSTRAINT uq_user_building_slot UNIQUE (user_id, building_type, slot_number)
);
```

## ğŸ”§ **ì„¤ì • ë° ì‹¤í–‰**

1. **í”„ë¡œì íŠ¸ ë¹Œë“œ**
```bash
./gradlew build
```

2. **ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰**
```bash
./gradlew bootRun
```

## ğŸ“ **ì£¼ìš” íŠ¹ì§•**

- âœ… **ìë™ ì¸µ í™•ì¥**: í•œ ì¸µ ì™„ì„± ì‹œ ë‹¤ìŒ ì¸µ ìë™ ì—´ë¦¼
- âœ… **ì½”ì¸ ì°¨ê°**: ê³µê°„ ì„¤ì¹˜/ì—…ê·¸ë ˆì´ë“œ ì‹œ ìë™ìœ¼ë¡œ ì½”ì¸ ì°¨ê°
- âœ… **ì™¸ê´€ ì—…ê·¸ë ˆì´ë“œ**: ì¡°ê±´ ë§Œì¡± ì‹œ ë¬´ë£Œë¡œ ì™¸ê´€ ì—…ê·¸ë ˆì´ë“œ
- âœ… **ë³´ì•ˆ**: ì‚¬ìš©ìëŠ” ìì‹ ì˜ ê±´ë¬¼ë§Œ ì ‘ê·¼ ê°€ëŠ¥
- âœ… **í™•ì¥ ê°€ëŠ¥**: ìƒˆë¡œìš´ ê±´ë¬¼ íƒ€ì…ê³¼ ê³µê°„ íƒ€ì… ì‰½ê²Œ ì¶”ê°€ ê°€ëŠ¥

## ğŸš€ **í–¥í›„ í™•ì¥ ê³„íš**

- ê±´ë¬¼ë³„ íŠ¹ìˆ˜ íš¨ê³¼
- ê³µê°„ ì¡°í•©ì— ë”°ë¥¸ ë³´ë„ˆìŠ¤
- ì¹œêµ¬ì™€ì˜ ê±´ë¬¼ ë¹„êµ
- ê±´ë¬¼ ë­í‚¹ ì‹œìŠ¤í…œ
- ê±´ë¬¼ë³„ ì´ë²¤íŠ¸

ì´ì œ ì‚¬ìš©ìë“¤ì´ ì½”ì¸ì„ ì‚¬ìš©í•˜ì—¬ ê±´ë¬¼ì„ ê±´ì„¤í•˜ê³  ì—…ê·¸ë ˆì´ë“œí•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œì´ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰
